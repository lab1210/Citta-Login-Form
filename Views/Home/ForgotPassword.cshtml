@model CittaLogin.Models.LoginModel
@{
    ViewData["Title"] = "Forgot Password";
}

<div class="max-h-screen flex flex-col bg-gradient-to-r from-blue-500 via-cyan-500 to-teal-500">
    <!-- Simulate Errors Button -->
    <div class="flex justify-end mt-4 mr-4">
        <button type="button" id="simulateErrors"
            class="text-xs bg-red-500/20 text-red-100 px-3 py-1 rounded hover:bg-red-500/30 transition">
            Simulate Errors
        </button>
    </div>

    <form class="flex flex-col items-center justify-center h-screen font-[Poppins] sm:p-5 p-5">
        <div class="flex items-center mb-5">
            <div class="w-14 h-14">
                <img src="@Model.ProfileImagePath" class="w-full h-full" />
            </div>
            <p class="text-white text-lg font-[400]">@Model.CompanyName</p>
        </div>

        <!-- Password Reset Box -->
        <div class="px-8 py-6 bg-white/20 w-full max-w-md backdrop-blur-sm border border-white/30 shadow-lg rounded-lg">
            <p class="font-[500] text-center mb-5 text-xl text-white">Reset Your Password</p>

            <div class="mb-4 text-sm text-white/80 text-center">
                Enter your email and we'll send you a link to reset your password.
            </div>

            <!-- Email Input -->
            <div class="flex flex-col gap-1 mb-4">
                <label class="font-[400] text-xs text-white/80" for="resetEmail">Email address</label>
                <div class="relative">
                    <input type="email" id="resetEmail" name="Email"
                        class="w-full text-sm p-3 border border-white/30 rounded-lg bg-white/10 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/50 focus:border-transparent transition-all">
                    <svg class="absolute right-3 top-3.5 h-4 w-4 text-[#F58324]/90" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207" />
                    </svg>
                </div>
                <div id="emailError" class="text-xs text-red-300 mt-1 hidden flex items-center gap-1">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd"
                            d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
                            clip-rule="evenodd" />
                    </svg>
                    <span>Please enter a valid email address</span>
                </div>
            </div>

            <!-- Submit Button -->
            <div class="mb-5">
                <button type="button" id="resetButton"
                    class="rounded-sm bg-[#F58324] text-white font-[500] w-full p-2 hover:bg-[#F58324]/90 transition shadow-md hover:shadow-lg">
                    Send Reset Link
                </button>
            </div>

            <!-- Back to Login -->
            <div class="flex justify-center">
                <a href="/" class="text-xs underline underline-offset-2 text-white hover:text-[#F58324]/90 transition">
                    Back to login
                </a>
            </div>
        </div>
    </form>

    <!-- Footer -->
    <div class="flex justify-end items-center p-2">
        <p class="text-white text-sm">
            Powered by
        </p>
        <div class="w-20 h-8">
            <img src="~/Image/logo.png" class="w-full h-full" />
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Error simulation functionality
        document.getElementById('simulateErrors').addEventListener('click', function () {
            const emailInput = document.getElementById('resetEmail');
            const emailError = document.getElementById('emailError');

            // Show error state
            emailInput.classList.add('border-red-400');
            emailError.classList.remove('hidden');

            // Show success message after delay
            setTimeout(function () {
                emailInput.classList.remove('border-red-400');
                emailError.classList.add('hidden');

                // Create success message
                const successMessage = document.createElement('div');
                successMessage.className = 'mb-4 p-3 bg-green-500/20 text-green-100 rounded-lg text-sm flex items-center gap-2';
                successMessage.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">' +
                    '<path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />' +
                    '</svg>' +
                    '<span>Password reset link sent to your email</span>';

                // Insert success message
                document.querySelector('.font-[500].text-center').after(successMessage);

                // Remove after 5 seconds
                setTimeout(function () { successMessage.remove(); }, 5000);
            }, 2000);
        });

        // Actual reset functionality
        document.getElementById('resetButton').addEventListener('click', function () {
            const emailInput = document.getElementById('resetEmail');
            const emailError = document.getElementById('emailError');

            // Simple validation
            if (!emailInput.value || !emailInput.value.includes("@@")) {
                emailInput.classList.add('border-red-400');
                emailError.classList.remove('hidden');
            } else {
                // Show success message
                const successMessage = document.createElement('div');
                successMessage.className = 'mb-4 p-3 bg-green-500/20 text-green-100 rounded-lg text-sm flex items-center gap-2';
                successMessage.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">' +
                    '<path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />' +
                    '</svg>' +
                    '<span>Password reset link sent to your email</span>';

                document.querySelector('.font-[500].text-center').after(successMessage);
                setTimeout(function () { successMessage.remove(); }, 5000);
            }
        });
    </script>
}